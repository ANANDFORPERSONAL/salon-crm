ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:14201) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/health
127.0.0.1 - - [11/Nov/2025:21:19:59 +0000] "GET /api/health HTTP/1.1" 200 96 "-" "curl/8.7.1"
ğŸ“¥ Incoming GET /api/health
127.0.0.1 - - [11/Nov/2025:21:20:44 +0000] "GET /api/health HTTP/1.1" 200 96 "-" "curl/8.7.1"
ğŸ“¥ Incoming POST /api/admin/login
ğŸ”— Connecting to main database: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main
127.0.0.1 - - [11/Nov/2025:21:22:18 +0000] "POST /api/admin/login HTTP/1.1" 401 47 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/admin/login
127.0.0.1 - - [11/Nov/2025:21:27:51 +0000] "POST /api/admin/login HTTP/1.1" 200 887 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [11/Nov/2025:21:27:53 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 200 103 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [11/Nov/2025:21:27:53 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/admin/businesses
ğŸ”— Connecting to business database: ease_my_salon_6913aabeadc31441c53cb86f
âœ… Connected to business database: ease_my_salon_6913aabeadc31441c53cb86f
Error creating default business settings: TypeError: Cannot read properties of undefined (reading 'createBusinessModels')
    at /Users/shubhamanand/salon-crm/backend/routes/admin.js:368:43
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
127.0.0.1 - - [11/Nov/2025:21:29:34 +0000] "POST /api/admin/businesses HTTP/1.1" 201 1606 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:21:29:36 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 200 1668 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:21:29:36 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [11/Nov/2025:21:29:48 +0000] "POST /api/auth/login HTTP/1.1" 200 2447 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/sales HTTP/1.1" 200 26 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
Total services: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 200 87 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 0
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/services?limit=1000 HTTP/1.1" 200 88 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
Total staff: 0
Total clients: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 200 87 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 200 85 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
Total appointments: 0
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
Total receipts: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913aabeadc31441c53cb86f')
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/reports/dashboard HTTP/1.1" 200 150 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 88 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/settings/payment HTTP/1.1" 404 55 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 0
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
Total staff: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
Total clients: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/settings/payment HTTP/1.1" 404 55 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 0
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913aabeadc31441c53cb86f')
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:29:50 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:29:51 +0000] "GET /api/settings/business HTTP/1.1" 200 1006 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:29:51 +0000] "GET /api/settings/business HTTP/1.1" 200 1006 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/admin/profile HTTP/1.1" 200 714 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  _id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/auth/profile HTTP/1.1" 200 458 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  _id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 200 1690 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total products: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/settings/payment HTTP/1.1" 200 656 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
Total staff: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
Total clients: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total appointments: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
Total receipts: 0
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913aabeadc31441c53cb86f')
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
Total products: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
Total staff: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
Total clients: 0
Total appointments: 0
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913aabeadc31441c53cb86f')
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:32:12 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
