
> salon-crm-backend@1.0.0 dev
> nodemon server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:61496) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:61496) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:61496) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
MongoDB Connected: localhost
â° Inactivity checker scheduled to run daily at 2 AM IST
ğŸ“¥ Incoming POST /api/auth/login
ğŸ”— Connecting to main database: salon_crm_main
(node:61496) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:61496) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
::1 - - [15/Oct/2025:20:34:31 +0000] "POST /api/auth/login HTTP/1.1" 200 2545881 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
(node:61496) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:61496) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 35
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/sales HTTP/1.1" 200 34930 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 5
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/appointments?limit=200&date=2025-10-16 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total products: 6
âœ… Services found: 5
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 1
âœ… Products found: 6
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
Total clients: 4
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
Total appointments: 2
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
Total receipts: 0
âœ… Sales found: 35
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/appointments?limit=200&date=2025-10-16 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
âœ… Services found: 5
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 35
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 6
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 5
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
Total products: 6
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 1
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total clients: 4
âœ… Sales found: 35
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 2
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:34:34 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 4
ğŸ“‹ Clients returned: 4
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/clients HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
âœ… Products found: 6
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 5
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“Š Total clients found: 4
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Clients returned: 4
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/clients HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 26,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: true,
  enableProcessingFees: true,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-10-15T20:25:47.670Z,
  __v: 0,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 26
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/pos HTTP/1.1" 200 95 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/staff-directory HTTP/1.1" 200 4266 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 6
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 5
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 26,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: true,
  enableProcessingFees: true,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-10-15T20:25:47.670Z,
  __v: 0,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 26
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:34:38 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Shubham
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:34:41 +0000] "GET /api/sales/client/Shubham HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Shubham
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:36:20 +0000] "GET /api/sales/client/Shubham HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/68e86151a0d6a0129a6ce216/payment-summary
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:36:27 +0000] "GET /api/sales/68e86151a0d6a0129a6ce216/payment-summary HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Shivam
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/Shubham
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/test%20test
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/Test%20Client
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shubham HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shivam HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/test%20test HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Test%20Client HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/Shubham
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/Shivam
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/test%20test
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/Test%20Client
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shivam HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/test%20test HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shubham HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Test%20Client HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Shivam
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shivam HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Shivam
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales/client/Shubham
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shivam HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shubham HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Shubham
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/test%20test
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Shubham HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/test%20test HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/test%20test
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/sales/client/Test%20Client
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/test%20test HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Test%20Client HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Test%20Client
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:37:35 +0000] "GET /api/sales/client/Test%20Client HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 5
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 5
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 5
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 5
::1 - - [15/Oct/2025:20:37:40 +0000] "GET /api/services HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Date filter - From: 2025-10-15T18:30:00.000Z Parsed: 2025-10-15T18:30:00.000Z
ğŸ” Date filter - To: 2025-10-16T18:29:59.999Z Parsed: 2025-10-16T18:29:59.999Z
ğŸ” Final date query: { '$gte': 2025-10-15T18:30:00.000Z, '$lte': 2025-10-16T18:29:59.999Z }
ğŸ” Final query being executed: {
  "transactionDate": {
    "$gte": "2025-10-15T18:30:00.000Z",
    "$lte": "2025-10-16T18:29:59.999Z"
  }
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 0
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 6
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/inventory/transactions?page=1&limit=100&dateFrom=2025-10-15T18:30:00.000Z&dateTo=2025-10-16T18:29:59.999Z HTTP/1.1" 200 82 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Date filter - From: 2025-10-15T18:30:00.000Z Parsed: 2025-10-15T18:30:00.000Z
ğŸ” Date filter - To: 2025-10-16T18:29:59.999Z Parsed: 2025-10-16T18:29:59.999Z
ğŸ” Final date query: { '$gte': 2025-10-15T18:30:00.000Z, '$lte': 2025-10-16T18:29:59.999Z }
ğŸ” Final query being executed: {
  "transactionDate": {
    "$gte": "2025-10-15T18:30:00.000Z",
    "$lte": "2025-10-16T18:29:59.999Z"
  }
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 0
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 6
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/inventory/transactions?page=1&limit=100&dateFrom=2025-10-15T18:30:00.000Z&dateTo=2025-10-16T18:29:59.999Z HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 6
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 6
::1 - - [15/Oct/2025:20:40:37 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Date filter - From: 2025-10-15T18:30:00.000Z Parsed: 2025-10-15T18:30:00.000Z
ğŸ” Date filter - To: 2025-10-16T18:29:59.999Z Parsed: 2025-10-16T18:29:59.999Z
ğŸ” Final date query: { '$gte': 2025-10-15T18:30:00.000Z, '$lte': 2025-10-16T18:29:59.999Z }
ğŸ” Final query being executed: {
  "transactionDate": {
    "$gte": "2025-10-15T18:30:00.000Z",
    "$lte": "2025-10-16T18:29:59.999Z"
  }
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Date filter - From: 2025-10-08T18:30:00.000Z Parsed: 2025-10-08T18:30:00.000Z
ğŸ” Date filter - To: 2025-10-16T18:29:59.999Z Parsed: 2025-10-16T18:29:59.999Z
ğŸ” Final date query: { '$gte': 2025-10-08T18:30:00.000Z, '$lte': 2025-10-16T18:29:59.999Z }
ğŸ” Final query being executed: {
  "transactionDate": {
    "$gte": "2025-10-08T18:30:00.000Z",
    "$lte": "2025-10-16T18:29:59.999Z"
  }
}
ğŸ” Found transactions: 0
ğŸ” Found transactions: 20
ğŸ” First transaction date: 2025-10-09T22:57:48.770Z
::1 - - [15/Oct/2025:20:40:55 +0000] "GET /api/inventory/transactions?page=1&limit=100&dateFrom=2025-10-15T18:30:00.000Z&dateTo=2025-10-16T18:29:59.999Z HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
::1 - - [15/Oct/2025:20:40:55 +0000] "GET /api/inventory/transactions?page=1&limit=100&dateFrom=2025-10-08T18:30:00.000Z&dateTo=2025-10-16T18:29:59.999Z HTTP/1.1" 200 11112 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 6
::1 - - [15/Oct/2025:20:45:35 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 6
::1 - - [15/Oct/2025:20:45:35 +0000] "GET /api/products HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:53:59 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
::1 - - [15/Oct/2025:20:53:59 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:54:03 +0000] "GET /api/staff-directory?search= HTTP/1.1" 200 4266 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  iat: 1760560471,
  exp: 1760646871
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
::1 - - [15/Oct/2025:20:54:03 +0000] "GET /api/staff-directory?search= HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
