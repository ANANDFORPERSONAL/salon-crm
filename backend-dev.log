
> ease-my-salon-backend@1.0.0 dev
> nodemon server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:68475) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:68475) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:68475) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:05:34:21 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
ğŸ”— Connecting to main database: salon_crm_main
(node:68475) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:68475) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
127.0.0.1 - - [08/Nov/2025:05:35:56 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [08/Nov/2025:05:36:17 +0000] "POST /api/auth/login HTTP/1.1" 200 2545932 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
(node:68475) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:68475) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total services: 215
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total products: 378
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total clients: 2534
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
Total products: 378
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 5
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:36:19 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:36:45 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
âŒ Staff member not found: {
  staffId: new ObjectId('68db3d367d2a8df8f4023d6c'),
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  email: 'admin@elegant.com'
}
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/auth/profile HTTP/1.1" 404 50 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total services: 215
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total products: 378
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
Total appointments: 5
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:37:51 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total products: 378
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
Total appointments: 5
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:37:52 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
âŒ Staff member not found: {
  staffId: new ObjectId('68db3d367d2a8df8f4023d6c'),
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  email: 'admin@elegant.com'
}
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/auth/profile HTTP/1.1" 404 50 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:05:47:31 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:73797) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:73797) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:73797) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:73876) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:73876) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:73876) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:91438) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:91438) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:91438) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/shubhamanand/ease-my-salon/backend/server.js:603
    } else {
    ^

SyntaxError: Missing catch or finally after try
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:91910) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:91910) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:91910) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:92115) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:92115) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:92115) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:92192) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:92192) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:92192) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/admin/profile
ğŸ”— Connecting to main database: salon_crm_main
(node:92192) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:92192) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:07:21:23 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:07:21:23 +0000] "GET /api/auth/profile HTTP/1.1" 200 450 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
(node:92192) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:92192) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:07:21:23 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:07:21:23 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:07:21:23 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:07:21:23 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:07:21:23 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:07:21:24 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:07:21:24 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:07:21:24 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:07:23:41 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:07:23:41 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:07:23:44 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:07:23:44 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:16:34 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:16:34 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total services: 215
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:16:16:34 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 378
127.0.0.1 - - [08/Nov/2025:16:16:34 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:16:16:34 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
Total receipts: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total products: 378
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total appointments: 5
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:16:35 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:16:43 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:16:43 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:16:45 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:16:45 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:22776) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:22776) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:22776) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/admin/profile
ğŸ”— Connecting to main database: salon_crm_main
(node:22776) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:22776) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
Admin auth error: TokenExpiredError: jwt expired
    at /Users/shubhamanand/ease-my-salon/backend/node_modules/jsonwebtoken/verify.js:190:21
    at getSecret (/Users/shubhamanand/ease-my-salon/backend/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/Users/shubhamanand/ease-my-salon/backend/node_modules/jsonwebtoken/verify.js:101:10)
    at authenticateAdmin (/Users/shubhamanand/ease-my-salon/backend/routes/admin.js:22:25)
    at Layer.handle [as handle_request] (/Users/shubhamanand/ease-my-salon/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/shubhamanand/ease-my-salon/backend/node_modules/express/lib/router/route.js:149:13)
    at setupMainDatabase (/Users/shubhamanand/ease-my-salon/backend/middleware/business-db.js:73:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  expiredAt: 2025-11-08T10:47:42.000Z
}
127.0.0.1 - - [08/Nov/2025:16:19:52 +0000] "GET /api/admin/profile HTTP/1.1" 401 41 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:16:19:52 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
(node:22776) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:22776) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:19:52 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:19:52 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:19:53 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:19:53 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:21:48 +0000] "PUT /api/settings/payment HTTP/1.1" 200 835 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:21:55 +0000] "PUT /api/settings/payment HTTP/1.1" 200 835 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:21:56 +0000] "GET /api/settings/payment HTTP/1.1" 200 144 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:21:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:21:57 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:21:57 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:22:31 +0000] "PUT /api/settings/payment HTTP/1.1" 200 835 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:22:45 +0000] "PUT /api/settings/payment HTTP/1.1" 200 835 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:16:22:49 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:22:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:22:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:22:50 +0000] "GET /api/settings/payment HTTP/1.1" 200 144 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:22:50 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:38:12 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762580177,
  exp: 1762666577
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:46:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:46:31 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:46:31 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/settings/business HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/products?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/settings/business HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/settings/payment HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/settings/payment HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/products?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/settings/payment HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/products?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/settings/payment HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [08/Nov/2025:16:47:15 +0000] "GET /api/products?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [08/Nov/2025:16:47:31 +0000] "POST /api/auth/login HTTP/1.1" 200 2545932 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:47:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:47:31 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:47:31 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:47:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total services: 215
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total products: 378
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total staff: 2
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 5
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
Total receipts: 0
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/appointments?limit=200&date=2025-11-08 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total services: 215
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 378
Total staff: 2
Total clients: 2534
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 5
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [08/Nov/2025:16:47:32 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:47:33 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:47:33 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:47:34 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:47:36 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:47:36 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:47:36 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:47:36 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:49:12 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:49:12 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:49:22 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:49:22 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:49:22 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:33281) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:33281) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:33281) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:33382) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:33382) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:33382) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:33443) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:33443) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:33443) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:33562) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:33562) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:33562) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ”— Connecting to main database: salon_crm_main
(node:33562) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:33562) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
(node:33562) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:33562) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:50:39 +0000] "GET /api/settings/payment HTTP/1.1" 200 656 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:50:39 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:50:39 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:50:39 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:50:39 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:50:39 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:16:51:25 +0000] "GET /api/auth/profile HTTP/1.1" 200 450 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/settings/business HTTP/1.1" 200 1023 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:51:26 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:51:28 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:51:28 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:51:28 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:51:28 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:51:28 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:51:28 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:51:55 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:51:55 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:51:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:51:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:52:17 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1233 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:16:52:19 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:52:19 +0000] "GET /api/settings/business HTTP/1.1" 200 1183 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:52:19 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:52:21 +0000] "GET /api/settings/payment HTTP/1.1" 200 542 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:52:21 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:52:27 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:52:29 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:52:29 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:52:29 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:52:29 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:52:29 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:52:29 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:34316) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:34316) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:34316) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ”— Connecting to main database: salon_crm_main
(node:34316) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:34316) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
(node:34316) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:34316) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:53:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:53:49 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:16:53:49 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:53:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:53:49 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:53:49 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:54:41 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:54:41 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:54:41 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:54:41 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:54:41 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:54:41 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:35390) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:35390) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:35390) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/categories
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ”— Connecting to main database: salon_crm_main
(node:35390) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:35390) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
(node:35390) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:35390) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:16:56:06 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:56:06 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:56:06 +0000] "GET /api/categories?activeOnly=true&type=product HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:35653) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:35653) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:35653) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Salon CRM Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:36416) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:36416) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:36416) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ”— Connecting to main database: salon_crm_main
(node:36416) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:36416) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
âœ… Connected to main database: salon_crm_main
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ”— Connecting to database: salon_crm_68db3d367d2a8df8f4023d6e
âœ… Connected to business database: salon_crm_68db3d367d2a8df8f4023d6e
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
(node:36416) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:36416) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 131509 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:16:59:12 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:02:39 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:02:39 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 131510 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:02:39 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:17:02:39 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:02:39 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:02:39 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:03:17 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:03:17 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:17 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:03:17 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:03:17 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:17 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:17:03:17 +0000] "GET /api/products?search=Aroma+magic+castor+oil&limit=5 HTTP/1.1" 200 434 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/products/6909007e408b28fb2f42956c
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” PUT /api/products/:id - Product update request received
ğŸ” Product ID: 6909007e408b28fb2f42956c
ğŸ” Request body: {
  name: 'Aroma magic castor oil',
  category: 'AROMA MAGIC',
  price: 230,
  stock: 5,
  sku: 'SKU-1762621406546',
  supplier: '',
  description: '',
  taxCategory: 'standard',
  productType: 'retail',
  transactionType: 'purchase',
  isActive: true,
  minimumStock: 5
}
ğŸ” Stock difference: 0
ğŸ” No stock change detected, skipping inventory transaction
127.0.0.1 - - [08/Nov/2025:17:03:26 +0000] "PUT /api/products/6909007e408b28fb2f42956c HTTP/1.1" 200 399 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:26 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 131535 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:26 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:26 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:03:35 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:03:35 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:35 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 131536 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:03:35 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:17:03:35 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:35 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:17:03:36 +0000] "GET /api/products?search=Aroma+magic+honey+body+lotion&limit=5 HTTP/1.1" 200 441 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:03:56 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:03:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:56 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:03:56 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:03:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:03:56 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 3
127.0.0.1 - - [08/Nov/2025:17:03:57 +0000] "GET /api/products?search=BODY+WASH&limit=5 HTTP/1.1" 200 1117 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:04:24 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:04:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:24 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:04:24 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:17:04:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:24 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:17:04:24 +0000] "GET /api/products?search=Aroma+magic+honey+body+lotion&limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/products/6909007e408b28fb2f429576
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” PUT /api/products/:id - Product update request received
ğŸ” Product ID: 6909007e408b28fb2f429576
ğŸ” Request body: {
  name: 'Aroma magic honey body lotion',
  category: 'AROMA MAGIC',
  price: 355,
  stock: 1,
  sku: 'SKU-1762621469651',
  supplier: '',
  description: '',
  taxCategory: 'standard',
  productType: 'retail',
  transactionType: 'purchase',
  isActive: true,
  minimumStock: 5
}
ğŸ” Stock difference: 0
ğŸ” No stock change detected, skipping inventory transaction
127.0.0.1 - - [08/Nov/2025:17:04:29 +0000] "PUT /api/products/6909007e408b28fb2f429576 HTTP/1.1" 200 406 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:29 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 131561 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:29 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:29 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:04:36 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:04:36 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:36 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 131562 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:04:36 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:17:04:36 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:36 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:17:04:37 +0000] "GET /api/products?search=Aroma+magic+moisturing+lotion&limit=5 HTTP/1.1" 200 441 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/products/6909007e408b28fb2f42957b
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” PUT /api/products/:id - Product update request received
ğŸ” Product ID: 6909007e408b28fb2f42957b
ğŸ” Request body: {
  name: 'Aroma magic moisturing lotion',
  category: 'Aroma magic',
  price: 375,
  stock: 5,
  sku: 'SKU-1762621483917',
  supplier: '',
  description: '',
  taxCategory: 'standard',
  productType: 'retail',
  transactionType: 'purchase',
  isActive: true,
  minimumStock: 5
}
ğŸ” Stock difference: 0
ğŸ” No stock change detected, skipping inventory transaction
127.0.0.1 - - [08/Nov/2025:17:04:43 +0000] "PUT /api/products/6909007e408b28fb2f42957b HTTP/1.1" 200 406 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:43 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 131587 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:43 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:43 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:04:58 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:04:58 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:58 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 131588 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:17:04:58 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:04:58 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:04:58 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:17:04:58 +0000] "GET /api/products?search=Aroma+magic+moisturing+lotion&limit=5 HTTP/1.1" 200 467 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/products/6909007e408b28fb2f42957b
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” PUT /api/products/:id - Product update request received
ğŸ” Product ID: 6909007e408b28fb2f42957b
ğŸ” Request body: {
  name: 'Aroma magic moisturing lotion',
  category: 'AROMA MAGIC',
  price: 375,
  stock: 5,
  sku: 'SKU-1762621483917',
  supplier: '',
  description: '',
  taxCategory: 'standard',
  productType: 'retail',
  transactionType: 'purchase',
  isActive: true,
  minimumStock: 5
}
ğŸ” Stock difference: 0
ğŸ” No stock change detected, skipping inventory transaction
127.0.0.1 - - [08/Nov/2025:17:05:01 +0000] "PUT /api/products/6909007e408b28fb2f42957b HTTP/1.1" 200 406 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:05:01 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 131587 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:05:01 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:05:01 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:17:05:07 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:05:07 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:05:07 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 131588 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:17:05:07 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:17:05:07 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:17:05:07 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 3
127.0.0.1 - - [08/Nov/2025:17:05:07 +0000] "GET /api/products?search=BODY+WASH&limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 378
127.0.0.1 - - [08/Nov/2025:21:03:31 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming DELETE /api/products/6909007e408b28fb2f429569
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:03:56 +0000] "DELETE /api/products/6909007e408b28fb2f429569 HTTP/1.1" 200 57 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:03:56 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 131252 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:03:56 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:03:56 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:04:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:04:02 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 131253 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:21:04:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:04:02 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:04:02 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:04:02 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:21:04:03 +0000] "GET /api/products?search=aroma+magic+plum+blossom+body+wash&limit=5 HTTP/1.1" 200 446 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/products/6909007e408b28fb2f429571
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” PUT /api/products/:id - Product update request received
ğŸ” Product ID: 6909007e408b28fb2f429571
ğŸ” Request body: {
  name: 'aroma magic plum blossom body wash',
  category: 'AROMA MAGIC',
  price: 225,
  stock: 3,
  sku: 'SKU-1762635847491',
  supplier: '',
  description: '',
  taxCategory: 'standard',
  productType: 'retail',
  transactionType: 'purchase',
  isActive: true,
  minimumStock: 5
}
ğŸ” Stock difference: 0
ğŸ” No stock change detected, skipping inventory transaction
127.0.0.1 - - [08/Nov/2025:21:04:07 +0000] "PUT /api/products/6909007e408b28fb2f429571 HTTP/1.1" 200 411 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:04:07 +0000] "GET /api/products?limit=1000 HTTP/1.1" 200 131278 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:04:07 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:04:07 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:04:15 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:04:15 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:04:15 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 131279 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:04:15 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:04:15 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:04:15 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:21:04:15 +0000] "GET /api/products?search=aroma+magic+plum+blossom+body+wash&limit=5 HTTP/1.1" 200 472 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:21:07:17 +0000] "GET /api/products?search=aroma+magic+plum+blossom+body+was&limit=5 HTTP/1.1" 200 472 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 1
127.0.0.1 - - [08/Nov/2025:21:07:18 +0000] "GET /api/products?search=aroma+magic+plum+blossom+&limit=5 HTTP/1.1" 200 472 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:08:24 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:08:28 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:08:28 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:08:28 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:08:28 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:08:28 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:08:28 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:21:10:48 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:10:48 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:10:48 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:10:48 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:10:48 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:10:48 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:10:48 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:10:49 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:10:50 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:10:50 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:10:50 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:10:50 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:10:50 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:10:50 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:12:41 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:13:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:13:27 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [08/Nov/2025:21:13:27 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:13:27 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [08/Nov/2025:21:13:27 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [08/Nov/2025:21:13:27 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [08/Nov/2025:21:13:27 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:28:13 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:28:13 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:05:28:13 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [09/Nov/2025:05:28:13 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:28:13 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:05:28:13 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:05:33:56 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:05:38:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:05:38:10 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:05:38:16 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:41:40 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:41:40 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:05:41:40 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:42:25 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:05:42:25 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:42:42 +0000] "GET /api/staff-directory?search= HTTP/1.1" 200 4888 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:42:42 +0000] "GET /api/staff-directory?search= HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: true,
  enableProcessingFees: true,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-08T16:52:17.012Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [09/Nov/2025:05:42:48 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: true,
  enableProcessingFees: true,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-08T16:52:17.012Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [09/Nov/2025:05:42:48 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:42:52 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:42:52 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:42:57 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1234 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:45:09 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1233 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:05:45:12 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1234 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/settings/business HTTP/1.1" 200 1184 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total services: 215
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/appointments?limit=200&date=2025-11-09 HTTP/1.1" 200 87 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 377
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
Total staff: 2
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total appointments: 5
Total receipts: 0
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/settings/payment HTTP/1.1" 200 543 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/reports/dashboard HTTP/1.1" 200 157 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/appointments?limit=200&date=2025-11-09 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 377
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762620451,
  exp: 1762706851
}
Total appointments: 5
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:06:23:47 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [09/Nov/2025:08:00:11 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "POST /api/auth/login HTTP/1.1" 200 2545932 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total services: 215
Total products: 377
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total staff: 2
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total receipts: 0
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/appointments?limit=200&date=2025-11-09 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/appointments?limit=200&date=2025-11-09 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total services: 215
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total products: 377
127.0.0.1 - - [09/Nov/2025:08:23:56 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:23:57 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:23:57 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total clients: 2534
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:23:57 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total receipts: 0
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:23:57 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:23:57 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:24:00 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:24:00 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:24:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:24:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:24:50 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1235 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [09/Nov/2025:08:24:52 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [09/Nov/2025:08:24:52 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:24:54 +0000] "GET /api/settings/payment HTTP/1.1" 200 544 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:24:54 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:24:55 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1235 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total services: 215
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/settings/business HTTP/1.1" 200 1185 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 377
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total staff: 2
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/appointments?limit=200&date=2025-11-09 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/settings/payment HTTP/1.1" 200 544 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total clients: 2534
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total receipts: 0
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:30:05 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/appointments?limit=200&date=2025-11-09 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total products: 377
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
Total staff: 2
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total appointments: 5
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:30:06 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [09/Nov/2025:08:30:09 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:09 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:09 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/staff-directory HTTP/1.1" 200 4888 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“Š Total clients found: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [09/Nov/2025:08:30:10 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:15 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:30:15 +0000] "GET /api/appointments?limit=100 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:15 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:15 +0000] "GET /api/appointments?limit=100 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“Š Total clients found: 2534
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/sales/client/kanchan%20singh
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/sales/client/amrita
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales/client/jaymati
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/sales/client/anshu
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/sales/client/WALKING
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/kanchan%20singh HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales/client/poshi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/amrita HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/WAZEDA
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/jaymati HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/anshu HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/WALKING HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/WAZEDA HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/poshi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:17 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [09/Nov/2025:08:30:21 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [09/Nov/2025:08:30:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:24 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:24 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:24 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Found transactions: 1
ğŸ” First transaction date: 2025-11-04T06:30:56.365Z
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [09/Nov/2025:08:30:25 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [09/Nov/2025:08:30:32 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:36 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [09/Nov/2025:08:30:36 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762676636,
  exp: 1762763036
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [09/Nov/2025:08:30:37 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [09/Nov/2025:08:30:37 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[2025-11-10T11:17:59.756Z] [PID: 36416] [32m[NODE-CRON][32m [33m[WARN][0m missed execution at Mon Nov 10 2025 02:00:00 GMT+0530 (India Standard Time)! Possible blocking IO or high CPU user at the same process used by node-cron.
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:11:37:36 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:11:38:04 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:11:38:04 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:14:37:40 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:14:38:05 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:17:37:42 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:17:38:07 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [10/Nov/2025:18:12:21 +0000] "POST /api/auth/login HTTP/1.1" 200 2545932 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/appointments?limit=200&date=2025-11-10 HTTP/1.1" 200 87 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 377
Total staff: 2
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total receipts: 0
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Sales found: 41
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/appointments?limit=200&date=2025-11-10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total services: 215
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total products: 377
Total staff: 2
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 5
âœ… Sales found: 41
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
âœ… Services found: 215
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Sales found: 41
127.0.0.1 - - [10/Nov/2025:18:12:22 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“Š Total clients found: 2534
âœ… Services found: 215
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/staff-directory HTTP/1.1" 200 4888 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Services found: 215
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“Š Total clients found: 2534
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [10/Nov/2025:18:21:08 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [10/Nov/2025:18:25:20 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 401 49 "-" "axios/1.11.0"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/auth/profile HTTP/1.1" 200 450 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Products found: 377
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Services found: 215
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Products found: 377
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Services found: 215
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [10/Nov/2025:18:25:21 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[2025-11-10T20:41:53.094Z] [PID: 36416] [32m[NODE-CRON][32m [33m[WARN][0m missed execution at Tue Nov 11 2025 02:00:00 GMT+0530 (India Standard Time)! Possible blocking IO or high CPU user at the same process used by node-cron.
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“Š Total clients found: 2534
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:24:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:25:19 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“Š Total clients found: 2534
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:25:19 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:25:19 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/amrita
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales/client/jaymati
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/kanchan%20singh
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales/client/anshu
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/poshi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/amrita HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales/client/WALKING
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/jaymati HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/WAZEDA
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/kanchan%20singh HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/poshi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/anshu HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/WALKING HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/WAZEDA HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:25:20 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:25:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:25:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“Š Total clients found: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“Š Total clients found: 2534
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:03:26:40 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:22 +0000] "POST /api/clients HTTP/1.1" 201 277 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2535
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:30:22 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 200 301446 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2535
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:30:22 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 200 301574 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2535
ğŸ“‹ Clients returned: 535
127.0.0.1 - - [11/Nov/2025:03:30:22 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 200 161785 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“Š Total clients found: 2535
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2535
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2535
ğŸ“‹ Clients returned: 535
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Keshav
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/poshi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/jaymati
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/amrita
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales/client/Ritika
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/Keshav HTTP/1.1" 200 26 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/poshi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/kanchan%20singh
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/Ritika HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/jaymati HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/amrita HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/anshu
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/kanchan%20singh HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/anshu HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:32 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming DELETE /api/clients/6912adce7cb7059bd9e52f22
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "DELETE /api/clients/6912adce7cb7059bd9e52f22 HTTP/1.1" 200 56 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/jaymati
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/amrita
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/poshi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/kanchan%20singh
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/anshu
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/jaymati HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/amrita HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/kanchan%20singh HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/poshi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Ritika
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/RANJANA
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/Ritika HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/RANJANA HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/anshu HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/Customer
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:03:30:38 +0000] "GET /api/sales/client/Customer HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:28:18 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:28:18 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:28:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:28:24 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:28:24 +0000] "GET /api/appointments?limit=100 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:04:28:24 +0000] "GET /api/appointments?limit=100 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“Š Total clients found: 2534
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 200 301483 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 200 301591 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:04:28:27 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 200 161482 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“Š Total clients found: 2534
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:29:03 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/pos
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“Š Total clients found: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
=== POS SETTINGS DEBUG ===
Full settings object: {
  _id: new ObjectId('68db45a939aa5019464c4b7a'),
  name: 'Elegant Beauty Lounge',
  email: 'info@elegantbeauty.com',
  phone: '+91 98765 43212',
  website: 'www.glamoursalon.com',
  description: 'Premium salon and spa services in the heart of the city',
  address: '789 Style Street',
  city: 'Bangalore',
  state: 'Karnataka',
  zipCode: '560001',
  receiptPrefix: 'INV',
  invoicePrefix: 'ELEGANT',
  receiptNumber: 32,
  autoIncrementReceipt: true,
  currency: 'INR',
  taxRate: 8.25,
  processingFee: 2.9,
  enableCurrency: true,
  enableTax: false,
  enableProcessingFees: false,
  socialMedia: '@glamoursalon',
  logo: '',
  gstNumber: '',
  createdAt: 2025-09-30T02:51:21.075Z,
  updatedAt: 2025-11-09T08:24:50.016Z,
  __v: 1,
  autoResetReceipt: false,
  resetFrequency: 'monthly',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  cgstRate: 9,
  essentialProductRate: 5,
  exemptProductRate: 0,
  igstRate: 18,
  intermediateProductRate: 12,
  luxuryProductRate: 28,
  productTaxRate: 18,
  serviceTaxRate: 5,
  sgstRate: 9,
  standardProductRate: 18,
  taxCategories: [
    { id: 'essential', name: 'Essential Products', rate: 5 },
    { id: 'standard', name: 'Standard Products', rate: 18 },
    { id: 'exempt', name: 'Exempt Products', rate: 0 }
  ],
  taxType: 'gst'
}
settings.invoicePrefix: ELEGANT
settings.receiptPrefix: INV
settings.receiptNumber: 32
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/pos HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“Š Total clients found: 2534
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:04:49:51 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:51:30 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:04:51:30 +0000] "GET /api/appointments?limit=100 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:51:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:51:31 +0000] "GET /api/appointments?limit=100 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“Š Total clients found: 2534
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:04:51:33 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  _id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
ğŸ“Š Total clients found: 2534
ğŸ“‹ Clients returned: 1000
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/clients?page=2&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  userEmail: 'admin@elegant.com',
  query: {},
  database: 'salon_crm_68db3d367d2a8df8f4023d6e'
}
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“Š Total clients found: 2534
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/staff-directory
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Clients returned: 534
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/clients?page=3&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/staff-directory HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:51:59 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total products: 377
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total staff: 2
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/appointments?limit=200&date=2025-11-11 HTTP/1.1" 200 87 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 2534
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
âœ… Business settings found: Elegant Beauty Lounge
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Services found: 215
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 215
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total products: 377
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/appointments?limit=200&date=2025-11-11 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 41
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 2
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '68db3d367d2a8df8f4023d6c',
  email: 'admin@elegant.com',
  role: 'admin',
  branchId: '68db3d367d2a8df8f4023d6e',
  iat: 1762798341,
  exp: 1762884741
}
Total clients: 2534
Total appointments: 5
ğŸ” Auth middleware user: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('68db3d367d2a8df8f4023d6c'),
  email: 'admin@elegant.com',
  branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('68db3d367d2a8df8f4023d6c'),
    email: 'admin@elegant.com',
    branchId: new ObjectId('68db3d367d2a8df8f4023d6e'),
    role: 'admin'
  },
  businessId: new ObjectId('68db3d367d2a8df8f4023d6e')
}
ğŸ” Getting business connection for ID: new ObjectId('68db3d367d2a8df8f4023d6e')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: admin@elegant.com branchId: new ObjectId('68db3d367d2a8df8f4023d6e')
Total receipts: 0
âœ… Sales found: 41
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('68db3d367d2a8df8f4023d6e')
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 377
127.0.0.1 - - [11/Nov/2025:04:54:31 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [11/Nov/2025:06:57:11 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [11/Nov/2025:09:04:47 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [11/Nov/2025:09:04:47 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [11/Nov/2025:11:43:03 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [11/Nov/2025:14:43:05 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [11/Nov/2025:15:32:25 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[2025-11-11T20:31:26.578Z] [PID: 36416] [32m[NODE-CRON][32m [33m[WARN][0m missed execution at Wed Nov 12 2025 02:00:00 GMT+0530 (India Standard Time)! Possible blocking IO or high CPU user at the same process used by node-cron.
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:4440) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4440) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:4440) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:4500) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4500) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:4500) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Salon CRM Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:4559) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4559) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:4559) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:4639) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4639) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:4639) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:4855) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4855) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:4855) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:4914) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4914) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:4914) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:4976) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4976) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:4976) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:5894) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:5894) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:5894) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:6610) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:6610) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:6610) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:6710) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:6710) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:6710) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:6767) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:6767) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:6767) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:6898) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:6898) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:6898) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:6956) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:6956) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:6956) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:7044) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7044) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:7044) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:7095) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7095) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:7095) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:7382) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7382) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:7382) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:7433) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7433) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:7433) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:7813) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7813) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:7813) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:8037) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:8037) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:8037) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:8543) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:8543) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:8543) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
[31m[nodemon] app crashed - waiting for f[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:10261) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:10261) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:10261) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:10573) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:10573) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:10573) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:11279) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:11279) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:11279) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:11317) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:11317) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:11317) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:11373) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:11373) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:11373) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:11422) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:11451) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:11545) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:12156) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:12198) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:68473) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [Bus]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:12747) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:13178) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:13624) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:13659) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:13709) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:13752) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:13806) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:13807) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:14428) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:14813) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:16025) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:16566) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:16994) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:17137) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:18472) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:18574) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:18982) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:19123) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:68473) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [Bus]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:19449) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:20171) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:20268) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:20311) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:20626) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:24282) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:24288) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:24458) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:27380) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:27630) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:28117) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:30992) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:31060) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:68473) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [Bus]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
ğŸš€ Starting Ease My Salon Backend Server...
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:31143) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:31177) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:31228) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:31299) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/shubhamanand/salon-crm/backend/server.js:373
    const mainConnection = await databaseManager.getMainConnection();
          ^

SyntaxError: Identifier 'mainConnection' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/shubhamanand/salon-crm/backend/server.js:373
    const mainConnection = await databaseManager.getMainConnection();
          ^

SyntaxError: Identifier 'mainConnection' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/shubhamanand/salon-crm/backend/server.js:373
    const mainConnection = await databaseManager.getMainConnection();
          ^

SyntaxError: Identifier 'mainConnection' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/shubhamanand/salon-crm/backend/server.js:373
    const mainConnection = await databaseManager.getMainConnection();
          ^

SyntaxError: Identifier 'mainConnection' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/shubhamanand/salon-crm/backend/server.js:373
    const mainConnection = await databaseManager.getMainConnection();
          ^

SyntaxError: Identifier 'mainConnection' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:68473) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [Bus]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
/Users/shubhamanand/salon-crm/backend/server.js:373
    const mainConnection = await databaseManager.getMainConnection();
          ^

SyntaxError: Identifier 'mainConnection' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/shubhamanand/salon-crm/backend/server.js:373
    const mainConnection = await databaseManager.getMainConnection();
          ^

SyntaxError: Identifier 'mainConnection' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:31790) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
ğŸš€ Starting Ease My Salon Backend Server...
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:32007) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:33910) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:34852) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:35036) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:35578) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:36630) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:36997) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:37059) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:38476) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:43238) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:43311) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:46237) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:47899) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:48007) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:48102) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:48172) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:48481) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:53594) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:54426) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:76338) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:76400) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:76452) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:76516) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:76630) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:76774) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
(node:68473) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [Bus]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:77271) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:78140) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:78498) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:78932) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:79847) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:79925) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:82329) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:82404) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:83784) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:68473) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [Bus]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:84677) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:9002) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:10008) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
node:events:486
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3001
}

Node.js v24.8.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
