ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:54056) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/admin/profile
ğŸ”— Connecting to main database: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main
127.0.0.1 - - [12/Nov/2025:05:04:48 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:05:04:48 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:05:04:48 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [12/Nov/2025:05:05:05 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [12/Nov/2025:05:05:05 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:05:05:05 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:05:05:05 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/admin/businesses
ğŸ”§ Creating business database for new business: shubahm (Code: BIZ0002)
Error creating default business settings: Error: Cannot create new business database: business code is required but got: BIZ0002
    at DatabaseManager.getConnection (/Users/shubhamanand/salon-crm/backend/config/database-manager.js:102:15)
    at /Users/shubhamanand/salon-crm/backend/routes/admin.js:402:56
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
127.0.0.1 - - [12/Nov/2025:05:28:08 +0000] "POST /api/admin/businesses HTTP/1.1" 201 1573 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:05:28:08 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 200 3221 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:05:28:08 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [12/Nov/2025:05:28:19 +0000] "POST /api/auth/login HTTP/1.1" 200 2419 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ”— Connecting to business database: salon_crm_BIZ0002 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0002
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ”— Connecting to business database: salon_crm_BIZ0002 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0002
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ”— Connecting to business database: salon_crm_BIZ0002 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0002
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ”— Connecting to business database: salon_crm_BIZ0002 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0002
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ”— Connecting to business database: salon_crm_BIZ0002 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0002
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total services: 0
ğŸ”— Connecting to business database: salon_crm_BIZ0002 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0002
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 0
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 0
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
Total clients: 0
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
Total appointments: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total receipts: 0
âœ… Services found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('69141ae82899e80b026a4927')
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
âœ… Products found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
âœ… Services found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
Total services: 0
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
Total products: 0
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141ae82899e80b026a4923',
  email: 'xyz@gmail.com',
  role: 'admin',
  branchId: '69141ae82899e80b026a4927',
  iat: 1762925299,
  exp: 1763011699
}
Total clients: 0
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Products found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total appointments: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141ae82899e80b026a4923'),
  email: 'xyz@gmail.com',
  branchId: new ObjectId('69141ae82899e80b026a4927'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141ae82899e80b026a4923'),
    email: 'xyz@gmail.com',
    branchId: new ObjectId('69141ae82899e80b026a4927'),
    role: 'admin'
  },
  businessId: new ObjectId('69141ae82899e80b026a4927')
}
ğŸ” Getting business connection for ID: new ObjectId('69141ae82899e80b026a4927')
Total receipts: 0
ğŸ“‹ Found business code: BIZ0002 for ID: 69141ae82899e80b026a4927
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: xyz@gmail.com branchId: new ObjectId('69141ae82899e80b026a4927')
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('69141ae82899e80b026a4927')
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:28:20 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/admin/businesses
ğŸ”§ Creating business database for new business: keshav (Code: BIZ0003)
Error creating default business settings: Error: Cannot create new business database: business code is required but got: BIZ0003
    at DatabaseManager.getConnection (/Users/shubhamanand/salon-crm/backend/config/database-manager.js:102:15)
    at /Users/shubhamanand/salon-crm/backend/routes/admin.js:402:56
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
127.0.0.1 - - [12/Nov/2025:05:29:44 +0000] "POST /api/admin/businesses HTTP/1.1" 201 1555 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:05:29:45 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 200 4772 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:05:29:45 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [12/Nov/2025:05:29:53 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [12/Nov/2025:05:29:54 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "POST /api/auth/login HTTP/1.1" 200 2413 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ”— Connecting to business database: salon_crm_BIZ0003 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0003
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ”— Connecting to business database: salon_crm_BIZ0003 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0003
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ”— Connecting to business database: salon_crm_BIZ0003 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0003
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ”— Connecting to business database: salon_crm_BIZ0003 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0003
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ”— Connecting to business database: salon_crm_BIZ0003 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0003
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ”— Connecting to business database: salon_crm_BIZ0003 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0003
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total services: 0
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
Total products: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
Total staff: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
Total clients: 0
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
Total appointments: 0
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total receipts: 0
âœ… Services found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“ No business settings found, creating default settings...
Get payment settings error: Error: BusinessSettings validation failed: phone: Path `phone` is required., address: Path `address` is required., city: Path `city` is required., state: Path `state` is required., zipCode: Path `zipCode` is required.
    at ValidationError.inspect (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/error/validation.js:52:26)
    at formatValue (node:internal/util/inspect:887:19)
    at inspect (node:internal/util/inspect:409:10)
    at formatWithOptionsInternal (node:internal/util/inspect:2574:40)
    at formatWithOptions (node:internal/util/inspect:2436:10)
    at console.value (node:internal/console/constructor:345:14)
    at console.error (node:internal/console/constructor:412:61)
    at /Users/shubhamanand/salon-crm/backend/server.js:5002:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  errors: {
    phone: ValidatorError: Path `phone` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'phone',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    address: ValidatorError: Path `address` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'address',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    city: ValidatorError: Path `city` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'city',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    state: ValidatorError: Path `state` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'state',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    zipCode: ValidatorError: Path `zipCode` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'zipCode',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    }
  },
  _message: 'BusinessSettings validation failed'
}
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/settings/payment HTTP/1.1" 500 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('69141b482899e80b026a49b3')
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“ No business settings found, creating default settings...
Get payment settings error: Error: BusinessSettings validation failed: phone: Path `phone` is required., address: Path `address` is required., city: Path `city` is required., state: Path `state` is required., zipCode: Path `zipCode` is required.
    at ValidationError.inspect (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/error/validation.js:52:26)
    at formatValue (node:internal/util/inspect:887:19)
    at inspect (node:internal/util/inspect:409:10)
    at formatWithOptionsInternal (node:internal/util/inspect:2574:40)
    at formatWithOptions (node:internal/util/inspect:2436:10)
    at console.value (node:internal/console/constructor:345:14)
    at console.error (node:internal/console/constructor:412:61)
    at /Users/shubhamanand/salon-crm/backend/server.js:5002:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  errors: {
    phone: ValidatorError: Path `phone` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'phone',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    address: ValidatorError: Path `address` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'address',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    city: ValidatorError: Path `city` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'city',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    state: ValidatorError: Path `state` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'state',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    zipCode: ValidatorError: Path `zipCode` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'zipCode',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    }
  },
  _message: 'BusinessSettings validation failed'
}
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/settings/payment HTTP/1.1" 500 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
âœ… Products found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
Total products: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
Total staff: 0
Total clients: 0
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
Total appointments: 0
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('69141b482899e80b026a49b3')
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/settings/business HTTP/1.1" 200 1006 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [12/Nov/2025:05:30:02 +0000] "GET /api/settings/business HTTP/1.1" 200 1006 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
127.0.0.1 - - [12/Nov/2025:06:11:15 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  _id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
127.0.0.1 - - [12/Nov/2025:06:11:15 +0000] "GET /api/auth/profile HTTP/1.1" 200 440 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/settings/payment HTTP/1.1" 200 656 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
Total services: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
Total products: 0
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
âœ… Products found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 0
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
Total clients: 0
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
Total appointments: 0
âœ… Services found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('69141b482899e80b026a49b3')
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
âœ… Services found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('69141b482899e80b026a49af'),
    email: 'abc@gmail.com',
    branchId: new ObjectId('69141b482899e80b026a49b3'),
    role: 'admin'
  },
  businessId: new ObjectId('69141b482899e80b026a49b3')
}
ğŸ” Getting business connection for ID: new ObjectId('69141b482899e80b026a49b3')
Total services: 0
ğŸ“‹ Found business code: BIZ0003 for ID: 69141b482899e80b026a49b3
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: abc@gmail.com branchId: new ObjectId('69141b482899e80b026a49b3')
Total products: 0
âœ… Sales found: 0
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 0
Total clients: 0
Total appointments: 0
Total receipts: 0
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('69141b482899e80b026a49b3')
127.0.0.1 - - [12/Nov/2025:06:11:16 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
