
> ease-my-salon-backend@1.0.0 dev
> nodemon server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...

ğŸ”§ ===== DatabaseManager Initialization =====
   Environment: development
   Full URI: mongodb://localhost:27017
   URI parts count: 3
   â„¹ï¸  No database name to remove
   âœ… Added authSource=admin for authentication
   Base URI: mongodb://localhost:27017?authSource=admin
âœ… DatabaseManager initialized
==========================================

ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:14269) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/health
127.0.0.1 - - [17/Nov/2025:06:27:31 +0000] "GET /api/health HTTP/1.1" 200 96 "-" "curl/8.7.1"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}

ğŸ”— Connecting to main database: ease_my_salon_main
   URI: mongodb://localhost:27017/ease_my_salon_main?authSource=admin
ğŸ“¥ Incoming GET /api/admin/profile

ğŸ”— Connecting to main database: ease_my_salon_main
   URI: mongodb://localhost:27017/ease_my_salon_main?authSource=admin
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}

ğŸ”— Connecting to main database: ease_my_salon_main
   URI: mongodb://localhost:27017/ease_my_salon_main?authSource=admin
   Actual DB Name: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main

   Actual DB Name: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main

ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
   Actual DB Name: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main

ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:30:26 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:30:26 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   ğŸ”— Creating new database connection
   Database Name: ease_my_salon_BIZ0001
   URI: mongodb://localhost:27017/ease_my_salon_BIZ0001?authSource=admin
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   ğŸ”— Creating new database connection
   Database Name: ease_my_salon_BIZ0001
   URI: mongodb://localhost:27017/ease_my_salon_BIZ0001?authSource=admin
   Actual DB Name: ease_my_salon_BIZ0001
   âœ… Database name verified
âœ… Connected to business database: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   Actual DB Name: ease_my_salon_BIZ0001
   âœ… Database name verified
âœ… Connected to business database: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/surbhi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/shivani
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/nilima
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/sachin
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/puja
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/sales/client/khushi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/surbhi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/shivani HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/puja HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/gudiya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/kavya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/khushi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/khushboo
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/nilima HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/tapshya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/sachin HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/gudiya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/kavya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/khushboo HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:27 +0000] "GET /api/sales/client/tapshya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming DELETE /api/clients/delete-all
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âš ï¸  TEMPORARY: Delete all clients requested
   User: test@gmail.com Role: admin
ğŸ“Š Deleting 416 clients...
âœ… Deleted 416 clients
127.0.0.1 - - [17/Nov/2025:06:30:35 +0000] "DELETE /api/clients/delete-all HTTP/1.1" 200 80 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 0
ğŸ“‹ Clients returned: 0
127.0.0.1 - - [17/Nov/2025:06:30:35 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 200 88 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/clients/import
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Client import request received
ğŸ“Š Processing 504 clients for import
âš™ï¸  Update existing clients: NO
ğŸ“‹ Current clients in database: 0
ğŸ“Š Import completed:
   âœ… Success: 416 (416 created, 0 updated)
   âŒ Errors: 0
   â­ï¸  Skipped: 88
   ğŸ“‹ Final database count: 416
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "POST /api/clients/import HTTP/1.1" 200 62570 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 200 109609 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/surbhi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/nilima
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/shivani
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/puja
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/sachin
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/sales/client/khushi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/surbhi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/nilima HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/puja HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/shivani HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/gudiya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/khushi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/kavya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/khushboo
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/sales/client/tapshya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/sachin HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/gudiya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/khushboo HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/kavya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:30:47 +0000] "GET /api/sales/client/tapshya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/surbhi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/shivani
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/nilima
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/sachin
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/puja
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/khushi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/sachin HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/gudiya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/khushi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/gudiya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/khushboo
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/kavya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/khushboo HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/kavya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/tapshya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/tapshya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/surbhi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/shivani HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/puja HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:33:59 +0000] "GET /api/sales/client/nilima HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:43:11 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:43:12 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:43:12 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:43:27 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:43:27 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:43:27 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:43:53 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“Š Total clients found: 416
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:43:53 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:43:53 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:44:09 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:44:09 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:44:09 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:47:29 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:47:29 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:47:29 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total services: 0
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
Total products: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total staff: 0
Total clients: 416
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
Total appointments: 0
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
Total receipts: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/appointments?limit=200&date=2025-11-17 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total services: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total products: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/appointments?limit=200&date=2025-11-17 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
Total staff: 0
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total clients: 416
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
Total appointments: 0
Total receipts: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:06:48:02 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:48:04 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸš€ Starting Ease My Salon Backend Server...

ğŸ”§ ===== DatabaseManager Initialization =====
   Environment: development
   Full URI: mongodb://localhost:27017
   URI parts count: 3
   â„¹ï¸  No database name to remove
   âœ… Added authSource=admin for authentication
   Base URI: mongodb://localhost:27017?authSource=admin
âœ… DatabaseManager initialized
==========================================

ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:21575) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}

ğŸ”— Connecting to main database: ease_my_salon_main
   URI: mongodb://localhost:27017/ease_my_salon_main?authSource=admin
ğŸ“¥ Incoming GET /api/admin/profile

ğŸ”— Connecting to main database: ease_my_salon_main
   URI: mongodb://localhost:27017/ease_my_salon_main?authSource=admin
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}

ğŸ”— Connecting to main database: ease_my_salon_main
   URI: mongodb://localhost:27017/ease_my_salon_main?authSource=admin
   Actual DB Name: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main

   Actual DB Name: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main

ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
   Actual DB Name: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main

ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   ğŸ”— Creating new database connection
   Database Name: ease_my_salon_BIZ0001
   URI: mongodb://localhost:27017/ease_my_salon_BIZ0001?authSource=admin
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   ğŸ”— Creating new database connection
   Database Name: ease_my_salon_BIZ0001
   URI: mongodb://localhost:27017/ease_my_salon_BIZ0001?authSource=admin
   Actual DB Name: ease_my_salon_BIZ0001
   âœ… Database name verified
âœ… Connected to business database: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  userEmail: 'test@gmail.com',
  query: {},
  database: 'ease_my_salon_BIZ0001'
}
ğŸ“Š Total clients found: 416
ğŸ“‹ Clients returned: 416
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   Actual DB Name: ease_my_salon_BIZ0001
   âœ… Database name verified
âœ… Connected to business database: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/surbhi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/sales/client/nilima
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/shivani
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/sachin
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/puja
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/khushi
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/surbhi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/nilima HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/shivani HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/sachin HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales/client/gudiya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/kavya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/khushboo
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales/client/tapshya
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763359110,
  exp: 1763445510
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/gudiya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/kavya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/khushboo HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/puja HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/tapshya HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:06:49:15 +0000] "GET /api/sales/client/khushi HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/logout
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:09:13:52 +0000] "POST /api/auth/logout HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:09:13:54 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/settings/business HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/reports/dashboard HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/services?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/products?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/sales HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/settings/business HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/appointments?limit=200&date=2025-11-17 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/services?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/products?limit=1000 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/reports/dashboard HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/settings/payment HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/appointments?limit=200&date=2025-11-17 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/sales HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/sales HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/settings/payment HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” No token found in request
127.0.0.1 - - [17/Nov/2025:11:00:47 +0000] "GET /api/sales HTTP/1.1" 401 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:11:00:50 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
â™»ï¸  Reusing existing main database connection
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:11:01:08 +0000] "POST /api/auth/login HTTP/1.1" 200 2444 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/appointments?limit=200&date=2025-11-17 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
Total staff: 0
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total clients: 416
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total appointments: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/appointments?limit=200&date=2025-11-17 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
Total products: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
Total staff: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total clients: 416
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
Total appointments: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
Total receipts: 0
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:01:09 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 0
127.0.0.1 - - [17/Nov/2025:11:01:19 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/services/import
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Service import request received
ğŸ“Š Processing 215 services for import
âœ… Service imported successfully: EYEBROW
âœ… Service imported successfully: FOREHEAD
âœ… Service imported successfully: UPPERLIPS
âœ… Service imported successfully: FULL FACE THREADING
âœ… Service imported successfully: Chin Threading
âœ… Service imported successfully: ROUND LAYERS
âœ… Service imported successfully: DIAMOND
âœ… Service imported successfully: LAYERS
âœ… Service imported successfully: GRADUATION
âœ… Service imported successfully: ADVANCE FEATHER
âœ… Service imported successfully: CHOP
âœ… Service imported successfully: GLAMOUR
âœ… Service imported successfully: REVERSE
âœ… Service imported successfully: M. STEPS
âœ… Service imported successfully: RAZOR
âœ… Service imported successfully: RAZOR WITH STEPS
âœ… Service imported successfully: V
âœ… Service imported successfully: WEDGE
âœ… Service imported successfully: MUSHROOM
âœ… Service imported successfully: U
âœ… Service imported successfully: BLUNT one lenght
âœ… Service imported successfully: BABY
âœ… Service imported successfully: FRONT
âœ… Service imported successfully: Butterfly Haircut
âœ… Service imported successfully: Haircut(Package)
âœ… Service imported successfully: wolf
âœ… Service imported successfully: plain haircut
âœ… Service imported successfully: bob
âœ… Service imported successfully: HEENA
âœ… Service imported successfully: GLOBAL
âœ… Service imported successfully: ROOT TOUCH-UP MATRIX WITH AMMONIA
âœ… Service imported successfully: ROOT TOUCH-UP MATRIX WITHOUT AMMONIA
âœ… Service imported successfully: ROOT TOUCH-UP LOREAL WITH AMMONIA
âœ… Service imported successfully: ROOT TOUCH-UP LOREAL WITHOUT AMMONIA
âœ… Service imported successfully: ROOT TOUCH-UP WELLA
âœ… Service imported successfully: GLOBAL HIGHLIGHT
âœ… Service imported successfully: STREAKS
âœ… Service imported successfully: HALF ROOT TOUCH-UP
âœ… Service imported successfully: BALAYAGE
âœ… Service imported successfully: OMBRE
âœ… Service imported successfully: PERMING
âœ… Service imported successfully: PERMANENT HAIR STRAIGHTENING
âœ… Service imported successfully: TEMPORARY HAIR STRAIGHTENING
âœ… Service imported successfully: BOTOX
âœ… Service imported successfully: NANOPLASTIA
âœ… Service imported successfully: HAIR SPA MATRIX
âœ… Service imported successfully: HAIR SPA LOREAL
âœ… Service imported successfully: HAIR SPA DEFABOLOUS
âœ… Service imported successfully: HAIR SPA ILLUVIA (M)
âœ… Service imported successfully: HAIR SPA FLORACTIVE
âœ… Service imported successfully: HAIR SPA KATIVA
âœ… Service imported successfully: HAIR SPA AMAZONIA
âœ… Service imported successfully: KERATIN DEFABOLOUS
âœ… Service imported successfully: KERATIN GK
âœ… Service imported successfully: KERA STRAIGHTENING
âœ… Service imported successfully: DRYER HAIR SETTING
âœ… Service imported successfully: TONGS
âœ… Service imported successfully: ROLLER SETTING
âœ… Service imported successfully: HOT ROLLER SETTING
âœ… Service imported successfully: BLOW DRYER
âœ… Service imported successfully: CRIMPER
âœ… Service imported successfully: FALL
âœ… Service imported successfully: BUN
âœ… Service imported successfully: PRESSING
âœ… Service imported successfully: SPLIT ENDS
âœ… Service imported successfully: HAIR WASH
âœ… Service imported successfully: SAREE DRAPING
âœ… Service imported successfully: HAIR STYLING
âœ… Service imported successfully: UNDERARMS HAIR REDUCTION
âœ… Service imported successfully: FULL HAND HAIR REDUCTION
âœ… Service imported successfully: FACE HAIR REDUCTION
âœ… Service imported successfully: FRONT HAIR REDUCTION
âœ… Service imported successfully: BACK HAIR REDUCTION
âœ… Service imported successfully: FULL LEG HAIR REDUCTION
âœ… Service imported successfully: FULL BODY HAIR REDUCTION
âœ… Service imported successfully: UPPERLIPS REDUCTION
âœ… Service imported successfully: FOREHEAD REDUCTION
âœ… Service imported successfully: CHIN REDUCTION
âœ… Service imported successfully: SIDELOCKS REDUCTION
âœ… Service imported successfully: Half Leg hair reduction
âœ… Service imported successfully: FULL FACE(HONEY)
âœ… Service imported successfully: UNDERARMS(HONEY)
âœ… Service imported successfully: FULL HAND(HONEY)
âœ… Service imported successfully: HALF LEG(HONEY)
âœ… Service imported successfully: FULL LEG(HONEY)
âœ… Service imported successfully: FULL BODY(HONEY)
âœ… Service imported successfully: FULL FACE(CHOCOLATE)
âœ… Service imported successfully: UNDERARMS(CHOCOLATE)
âœ… Service imported successfully: FULL HAND(CHOCOLATE)
âœ… Service imported successfully: HALF LEG(CHOCOLATE)
âœ… Service imported successfully: FULL LEG(CHOCOLATE)
âœ… Service imported successfully: FULL BODY(CHOCOLATE)
âœ… Service imported successfully: FULL FACE(RICA)
âœ… Service imported successfully: UNDERARMS(RICA)
âœ… Service imported successfully: FULL HAND(RICA)
âœ… Service imported successfully: HALF LEG(RICA)
âœ… Service imported successfully: FULL LEG(RICA)
âœ… Service imported successfully: FULL BODY(RICA)
âœ… Service imported successfully: UPPERLIPS(HONEY)
âœ… Service imported successfully: FOREHEAD(HONEY)
âœ… Service imported successfully: CHIN(HONEY)
âœ… Service imported successfully: SIDELOCKS(HONEY)
âœ… Service imported successfully: UPPERLIPS(CHOCOLATE)
âœ… Service imported successfully: FOREHEAD(CHOCOLATE)
âœ… Service imported successfully: CHIN(CHOCOLATE)
âœ… Service imported successfully: SIDELOCKS(CHOCOLATE)
âœ… Service imported successfully: UPPERLIPS(RICA)
âœ… Service imported successfully: FOREHEAD(RICA)
âœ… Service imported successfully: CHIN(RICA)
âœ… Service imported successfully: SIDELOCKS(RICA)
âœ… Service imported successfully: B WAX
âœ… Service imported successfully: butterfly cut
âœ… Service imported successfully: Nose wax
âœ… Service imported successfully: half stomach ( rica)
âœ… Service imported successfully: full back wax
âœ… Service imported successfully: full front wax rica
âœ… Service imported successfully: half back wax
âœ… Service imported successfully: half back wax rica
âœ… Service imported successfully: O3+ WRINKLES
âœ… Service imported successfully: O3+WHITENING
âœ… Service imported successfully: DIAMOND FACIAL
âœ… Service imported successfully: GOLD FACIAL
âœ… Service imported successfully: PEARL FACIAL
âœ… Service imported successfully: FLOWER FACIAL
âœ… Service imported successfully: AYURVEDIC FACIAL
âœ… Service imported successfully: LOTUS PLATINUM FACIAL
âœ… Service imported successfully: LOTUS RETINOL FACIAL
âœ… Service imported successfully: LOTUS GOLD FACIAL
âœ… Service imported successfully: BRAZILIAN
âœ… Service imported successfully: BULGARIAN ROSE
âœ… Service imported successfully: KIWI
âœ… Service imported successfully: PAPAYA
âœ… Service imported successfully: VINOGRAPES
âœ… Service imported successfully: 4 LAYERS ANTI AGEING
âœ… Service imported successfully: 4 LAYERS WHITENING
âœ… Service imported successfully: 4 LAYERS RADIANCE
âœ… Service imported successfully: INSTAFAIR
âœ… Service imported successfully: LOTUS SCRUB
âœ… Service imported successfully: HYDRA FACIAL
âœ… Service imported successfully: HYDRA FACIAL WITH BIOLINE
âœ… Service imported successfully: HYDRA WHITENING FACIAL WITH BIOLINE
âœ… Service imported successfully: BB GLOW FACIAL
âœ… Service imported successfully: NAIL GEL APPLICATION
âœ… Service imported successfully: NAIL EXTENSION
âœ… Service imported successfully: NAIL EXTENSION WITH GEL
âœ… Service imported successfully: NAIL EXTENSION WITH DESIGN
âœ… Service imported successfully: NAIL FILE
âœ… Service imported successfully: BIOLINE ANTI AGEING FACIAL
âœ… Service imported successfully: BIOLINE WHITENING FACIAL
âœ… Service imported successfully: CLEANUP BIOLINE
âœ… Service imported successfully: Bioline De sense mask
âœ… Service imported successfully: LIFTING CODE
âœ… Service imported successfully: DANDRUFF TREATMENT MATRIX
âœ… Service imported successfully: MATRIX HAIR OIL MASSAGE
âœ… Service imported successfully: GOLD BLEACH
âœ… Service imported successfully: OXY BLEACH
âœ… Service imported successfully: HAND BLEACH
âœ… Service imported successfully: LEG BLEACH
âœ… Service imported successfully: FULL BODY BLEACH
âœ… Service imported successfully: FACE MASK
âœ… Service imported successfully: UNDERARMS DTAN
âœ… Service imported successfully: FULL HAND DTAN
âœ… Service imported successfully: FACE DTAN
âœ… Service imported successfully: FULL LEG DTAN
âœ… Service imported successfully: FULL BODY DTAN
âœ… Service imported successfully: BACK AND FR0NT
âœ… Service imported successfully: HALF LEG
âœ… Service imported successfully: neck de tan
âœ… Service imported successfully: half back D-tan
âœ… Service imported successfully: face de tan single
âœ… Service imported successfully: Full back d-tan
âœ… Service imported successfully: AIRBRUSH MAKEUP
âœ… Service imported successfully: HD MAKEUP MAC
âœ… Service imported successfully: HD MAKEUP
âœ… Service imported successfully: BRIDAL MAKEUP
âœ… Service imported successfully: ENGAGEMENT MAKEUP NORMAL
âœ… Service imported successfully: ENGAGEMENT MAKEUP HD
âœ… Service imported successfully: ENGAGEMENT MAKEUP AIRBRUSH
âœ… Service imported successfully: LIGHT PARTY MAKEUP
âœ… Service imported successfully: PARTY MAKEUP
âœ… Service imported successfully: CASUAL MAKEUP
âœ… Service imported successfully: NUDE MAKEUP
âœ… Service imported successfully: reception makeup
âœ… Service imported successfully: Pre Bridal 7500
âœ… Service imported successfully: Dandiya Make-up
âœ… Service imported successfully: CRYSTAL SPA MANICURE
âœ… Service imported successfully: CRYSTAL SPA PEDICURE
âœ… Service imported successfully: MANICURE(450)
âœ… Service imported successfully: PEDICURE(700)
âœ… Service imported successfully: FULL BODY POLISHING
âœ… Service imported successfully: MANICURE(600)
âœ… Service imported successfully: PEDICURE(900)
âœ… Service imported successfully: pedicure
âœ… Service imported successfully: BODY MASSAGE
âœ… Service imported successfully: OIL MASSAGE
âœ… Service imported successfully: INFINITE YOUTH FACIAL WITHOUT ALGAE
âœ… Service imported successfully: INFINITE YOUTH FACIAL WITH ALGAE
âœ… Service imported successfully: INFINITE YOUTH FACIAL WITH AMPULE $ ALGAE
âœ… Service imported successfully: BRILLIANCE WHITE FACIAL WITHOUT ALGAE
âœ… Service imported successfully: BRILLIANCE WHITE FACIAL WITH ALGAE
âœ… Service imported successfully: BRILLIANCE WHITE FACIAL WITH AMPULE
âœ… Service imported successfully: HYDRA BOOST FACIAL WITHOUT ALGAE
âœ… Service imported successfully: HYDRA BOOST FACIAL WITH ALGAE
âœ… Service imported successfully: HYDRA BOOST FACIAL WITH AMPULE
âœ… Service imported successfully: JEANNOT CLEANUP
âœ… Service imported successfully: JEANNOT CLEANUP WITH MASSAGE
âœ… Service imported successfully: JEANNOT CLEANUP WITH MASSAGE 1500
âœ… Service imported successfully: ampule /algae
âœ… Service imported successfully: BRILLARE SCIENCE ANTI DANDRUFF TREATMENT
âœ… Service imported successfully: BRILLARE SCIENCE HAIRFALL TREATMENT
âœ… Service imported successfully: nose cleanup
âœ… Service imported successfully: hair prelighting
âœ… Service imported successfully: aroma magic facial
âœ… Service imported successfully: GK botox
âœ… Service imported successfully: peel
ğŸ“Š Import completed: 215 success, 0 errors, 0 skipped
127.0.0.1 - - [17/Nov/2025:11:01:48 +0000] "POST /api/services/import HTTP/1.1" 200 62398 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:01:48 +0000] "GET /api/services?limit=1000 HTTP/1.1" 200 57730 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:01:48 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:01:50 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:01:58 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:01:58 +0000] "GET /api/products?limit=10000 HTTP/1.1" 200 89 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:01:58 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:01:58 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:28:38 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:28:38 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:28:38 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:28:38 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:30:39 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:30:39 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:30:39 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:30:39 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:32 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:32 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:44:32 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:44:33 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:44:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:40 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:44:40 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:44:40 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:44:40 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Found transactions: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:41 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:44:44 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:44 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:11:44:44 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:44:44 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 200 26 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:44 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:44:44 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/auth/profile HTTP/1.1" 200 447 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Found transactions: 0
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Found transactions: 0
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Found transactions: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Found transactions: 0
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:54 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:44:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:56 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:44:56 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:44:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:44:56 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:44:56 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:47:28 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:47:29 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:47:29 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:47:29 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:47:29 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:55:36 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:55:36 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:55:36 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:55:36 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/admin/profile HTTP/1.1" 200 714 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/auth/profile HTTP/1.1" 200 447 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:55:49 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:55:50 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:55:50 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:11:55:50 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:55:50 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:56:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:56:08 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:11:56:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:56:08 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 0
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Found transactions: 0
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/inventory/transactions?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Found transactions: 0
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/inventory/transactions
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Final query being executed: {}
ğŸ” Found transactions: 0
127.0.0.1 - - [17/Nov/2025:11:57:08 +0000] "GET /api/inventory/transactions?page=1&limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:57:11 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:57:11 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/suppliers
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:57:11 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:57:11 +0000] "GET /api/suppliers?activeOnly=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:57:11 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:57:11 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:11:58:14 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:11:59:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:59:56 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:11:59:56 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:11:59:56 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:02:10 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:12:02:15 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:12:02:15 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
127.0.0.1 - - [17/Nov/2025:12:02:15 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:12:02:15 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Getting main connection...
â™»ï¸  Reusing existing main database connection
ğŸ” Admin authentication: Main connection established
ğŸ” Admin authentication: Looking up admin by ID: 6913a9dd45496f244d9d46fb
ğŸ” Admin authentication successful: admin@easemysalon.in
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  _id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
âœ… Services found: 215
127.0.0.1 - - [17/Nov/2025:12:03:50 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [17/Nov/2025:12:03:57 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:12:03:57 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6915ccfad2dd447cd79c5f52',
  email: 'test@gmail.com',
  role: 'admin',
  branchId: '6915ccfbd2dd447cd79c5f56',
  iat: 1763377268,
  exp: 1763463668
}
â™»ï¸  Reusing existing main database connection
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
ğŸ” Auth middleware user: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6915ccfad2dd447cd79c5f52'),
  email: 'test@gmail.com',
  branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6915ccfad2dd447cd79c5f52'),
    email: 'test@gmail.com',
    branchId: new ObjectId('6915ccfbd2dd447cd79c5f56'),
    role: 'admin'
  },
  businessId: new ObjectId('6915ccfbd2dd447cd79c5f56')
}
â™»ï¸  Reusing existing main database connection
ğŸ” Getting business connection for ID: new ObjectId('6915ccfbd2dd447cd79c5f56')

ğŸ” ===== Getting Business Database Connection =====
   Input: 6915ccfbd2dd447cd79c5f56
   Type: ObjectId
   ğŸ” Looking up business code for ObjectId...
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
   âœ… Found business code: BIZ0001
   â™»ï¸  Reusing existing connection: ease_my_salon_BIZ0001
================================================

ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: test@gmail.com branchId: new ObjectId('6915ccfbd2dd447cd79c5f56')
127.0.0.1 - - [17/Nov/2025:12:03:57 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [17/Nov/2025:12:03:57 +0000] "GET /api/products?limit=10000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Mobile Safari/537.36"
