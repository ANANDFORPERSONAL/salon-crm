🚀 Starting Salon CRM Backend Server...
🌍 Environment: development
🔗 CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
🗄️ MongoDB URI: Not set
🔑 JWT Secret: Not set
(node:20857) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:20857) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:20857) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
🚀 Salon CRM Backend running on port 3001
📊 Health check: http://localhost:3001/api/health
🔐 API Base: http://localhost:3001/api
MongoDB Connected: localhost
🔗 Connecting to main database: salon_crm_main
(node:20857) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:20857) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
✅ Connected to main database: salon_crm_main
Received businessInfo: {
  "name": "Test No Subscription Business",
  "businessType": "salon",
  "phone": "+91 9876543210",
  "email": "testnosub1759437111@example.com",
  "address": {
    "street": "Test Street",
    "city": "Mumbai",
    "state": "Maharashtra",
    "zipCode": "400001",
    "country": "India"
  }
}
🔗 Connecting to database: salon_crm_68dee137e7954d2afd099af5
✅ Connected to business database: salon_crm_68dee137e7954d2afd099af5
Error creating default business settings: TypeError: Cannot read properties of undefined (reading 'createBusinessModels')
    at /Users/shubhamanand/salon-crm/backend/routes/admin.js:352:43
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
(node:20857) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:20857) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
::1 - - [02/Oct/2025:20:31:51 +0000] "POST /api/admin/businesses HTTP/1.1" 201 1629 "-" "curl/8.7.1"
::1 - - [02/Oct/2025:20:31:58 +0000] "GET /api/admin/businesses HTTP/1.1" 200 11874 "-" "curl/8.7.1"
