ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:18761) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming GET /api/health
127.0.0.1 - - [11/Nov/2025:21:33:03 +0000] "GET /api/health HTTP/1.1" 200 96 "-" "curl/8.7.1"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ”— Connecting to main database: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ”— Connecting to business database: ease_my_salon_6913aabeadc31441c53cb86f
âœ… Connected to business database: ease_my_salon_6913aabeadc31441c53cb86f
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/cash-registry HTTP/1.1" 200 81 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/cash-registry
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/cash-registry HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 200 88 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/expenses
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/expenses?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:21:33:26 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6913aabeadc31441c53cb86f'),
  userEmail: 'shubhamanand222@gmail.com',
  query: {},
  database: 'ease_my_salon_6913aabeadc31441c53cb86f'
}
ğŸ“Š Total clients found: 0
ğŸ“‹ Clients returned: 0
127.0.0.1 - - [11/Nov/2025:21:33:33 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 200 88 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“¥ Incoming GET /api/clients
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Clients API Debug: {
  businessId: new ObjectId('6913aabeadc31441c53cb86f'),
  userEmail: 'shubhamanand222@gmail.com',
  query: {},
  database: 'ease_my_salon_6913aabeadc31441c53cb86f'
}
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:33:33 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“Š Total clients found: 0
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ“‹ Clients returned: 0
127.0.0.1 - - [11/Nov/2025:21:33:33 +0000] "GET /api/clients?page=1&limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:33:33 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:33:42 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913aabeadc31441c53cb86b',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913aabeadc31441c53cb86f',
  iat: 1762896588,
  exp: 1762982988
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913aabeadc31441c53cb86b'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913aabeadc31441c53cb86f'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913aabeadc31441c53cb86b'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913aabeadc31441c53cb86f'),
    role: 'admin'
  },
  businessId: new ObjectId('6913aabeadc31441c53cb86f')
}
ğŸ” Getting business connection for ID: new ObjectId('6913aabeadc31441c53cb86f')
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913aabeadc31441c53cb86f')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:21:33:42 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
