ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:37564) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming POST /api/admin/login
ğŸ”— Connecting to main database: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main
ğŸ” Admin login attempt: { email: 'admin@easemysalon.in' }
ğŸ” Looking for admin with email: admin@easemysalon.in
âœ… Admin found: {
  id: new ObjectId('6913a9dd45496f244d9d46fb'),
  email: 'admin@easemysalon.in',
  role: 'super_admin'
}
âœ… Password validated successfully
127.0.0.1 - - [11/Nov/2025:22:28:44 +0000] "POST /api/admin/login HTTP/1.1" 200 887 "-" "curl/8.7.1"
ğŸ“¥ Incoming POST /api/admin/login
ğŸ” Admin login attempt: { email: 'admin@easemysalon.in' }
ğŸ” Looking for admin with email: admin@easemysalon.in
âœ… Admin found: {
  id: new ObjectId('6913a9dd45496f244d9d46fb'),
  email: 'admin@easemysalon.in',
  role: 'super_admin'
}
âœ… Password validated successfully
127.0.0.1 - - [11/Nov/2025:22:33:31 +0000] "POST /api/admin/login HTTP/1.1" 200 887 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [11/Nov/2025:22:33:31 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 200 1644 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [11/Nov/2025:22:33:31 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [11/Nov/2025:22:33:33 +0000] "GET /api/admin/profile HTTP/1.1" 200 714 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [11/Nov/2025:22:33:33 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [11/Nov/2025:22:33:33 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming DELETE /api/admin/businesses/6913aabeadc31441c53cb86f
127.0.0.1 - - [11/Nov/2025:22:33:42 +0000] "DELETE /api/admin/businesses/6913aabeadc31441c53cb86f HTTP/1.1" 200 78 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [11/Nov/2025:22:33:42 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 200 103 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [11/Nov/2025:22:33:47 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/admin/businesses
ğŸ”— Connecting to business database: salon_crm_BIZ0001 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0001
Error creating default business settings: TypeError: Cannot read properties of undefined (reading 'createBusinessModels')
    at /Users/shubhamanand/salon-crm/backend/routes/admin.js:393:43
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
127.0.0.1 - - [11/Nov/2025:22:35:08 +0000] "POST /api/admin/businesses HTTP/1.1" 201 1587 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:22:35:08 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 200 1649 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:22:35:08 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/auth/login
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "POST /api/auth/login HTTP/1.1" 200 2447 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total services: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total products: 0
Total staff: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“ No business settings found, creating default settings...
Get payment settings error: Error: BusinessSettings validation failed: phone: Path `phone` is required., address: Path `address` is required., city: Path `city` is required., state: Path `state` is required., zipCode: Path `zipCode` is required.
    at ValidationError.inspect (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/error/validation.js:52:26)
    at formatValue (node:internal/util/inspect:887:19)
    at inspect (node:internal/util/inspect:409:10)
    at formatWithOptionsInternal (node:internal/util/inspect:2574:40)
    at formatWithOptions (node:internal/util/inspect:2436:10)
    at console.value (node:internal/console/constructor:345:14)
    at console.error (node:internal/console/constructor:412:61)
    at /Users/shubhamanand/salon-crm/backend/server.js:5002:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  errors: {
    phone: ValidatorError: Path `phone` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'phone',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    address: ValidatorError: Path `address` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'address',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    city: ValidatorError: Path `city` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'city',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    state: ValidatorError: Path `state` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'state',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    zipCode: ValidatorError: Path `zipCode` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'zipCode',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    }
  },
  _message: 'BusinessSettings validation failed'
}
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/settings/payment HTTP/1.1" 500 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total clients: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total appointments: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total receipts: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:35:17 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“ No business settings found, creating default settings...
Get payment settings error: Error: BusinessSettings validation failed: phone: Path `phone` is required., address: Path `address` is required., city: Path `city` is required., state: Path `state` is required., zipCode: Path `zipCode` is required.
    at ValidationError.inspect (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/error/validation.js:52:26)
    at formatValue (node:internal/util/inspect:887:19)
    at inspect (node:internal/util/inspect:409:10)
    at formatWithOptionsInternal (node:internal/util/inspect:2574:40)
    at formatWithOptions (node:internal/util/inspect:2436:10)
    at console.value (node:internal/console/constructor:345:14)
    at console.error (node:internal/console/constructor:412:61)
    at /Users/shubhamanand/salon-crm/backend/server.js:5002:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  errors: {
    phone: ValidatorError: Path `phone` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'phone',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    address: ValidatorError: Path `address` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'address',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    city: ValidatorError: Path `city` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'city',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    state: ValidatorError: Path `state` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'state',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    },
    zipCode: ValidatorError: Path `zipCode` is required.
        at validate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1407:13)
        at SchemaType.doValidate (/Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/schemaType.js:1391:7)
        at /Users/shubhamanand/salon-crm/backend/node_modules/mongoose/lib/document.js:3111:18
        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {
      properties: [Object],
      kind: 'required',
      path: 'zipCode',
      value: '',
      reason: undefined,
      Symbol(mongoose#validatorError): true
    }
  },
  _message: 'BusinessSettings validation failed'
}
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/settings/payment HTTP/1.1" 500 49 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total products: 0
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total staff: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total clients: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total appointments: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total receipts: 0
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/settings/business HTTP/1.1" 200 1006 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:18 +0000] "GET /api/settings/business HTTP/1.1" 200 1006 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:35 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:35 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:35:37 +0000] "GET /api/settings/payment HTTP/1.1" 200 656 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:35:37 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:35:40 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1057 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:42 +0000] "GET /api/settings/business HTTP/1.1" 200 1007 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:42 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:35:45 +0000] "GET /api/settings/payment HTTP/1.1" 200 657 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:35:45 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:35:48 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1057 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [11/Nov/2025:22:35:50 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  _id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
127.0.0.1 - - [11/Nov/2025:22:35:50 +0000] "GET /api/auth/profile HTTP/1.1" 200 458 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:50 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:50 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total services: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total products: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/settings/payment HTTP/1.1" 200 657 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total clients: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total appointments: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total receipts: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total services: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 0
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 0
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total appointments: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total receipts: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:51 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [11/Nov/2025:22:35:52 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  _id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
127.0.0.1 - - [11/Nov/2025:22:35:52 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total products: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total staff: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total clients: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total appointments: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total receipts: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total services: 0
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total products: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total staff: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total appointments: 0
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total receipts: 0
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:35:53 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:36:04 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:36:04 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:36:05 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:36:05 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:36:07 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:36:07 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming PUT /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:36:09 +0000] "PUT /api/settings/payment HTTP/1.1" 200 1332 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:36:10 +0000] "GET /api/settings/payment HTTP/1.1" 200 658 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
127.0.0.1 - - [11/Nov/2025:22:36:10 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/settings/business HTTP/1.1" 200 1282 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total services: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total products: 0
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/settings/business
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total staff: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total clients: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
Total appointments: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Business settings request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total receipts: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Business settings found: Glamour Salon & Spa
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/settings/business HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/appointments?limit=200&date=2025-11-12 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/services
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/settings/payment
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/appointments
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“¥ Incoming GET /api/reports/dashboard
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Services request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ“¥ Incoming GET /api/products
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Dashboard stats request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/settings/payment HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Services found: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/services?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total services: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Products request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/appointments?limit=500 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/appointments?limit=5 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total products: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
âœ… Products found: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/products?limit=1000 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total staff: 0
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:36:29 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Total clients: 0
ğŸ“¥ Incoming GET /api/sales
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '6913ba1c70f5bc2f8957d042',
  email: 'shubhamanand222@gmail.com',
  role: 'admin',
  branchId: '6913ba1c70f5bc2f8957d046',
  iat: 1762900517,
  exp: 1762986917
}
Total appointments: 0
ğŸ” Auth middleware user: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('6913ba1c70f5bc2f8957d042'),
  email: 'shubhamanand222@gmail.com',
  branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
  role: 'admin'
}
ğŸ” Business DB Middleware Debug: {
  user: {
    id: new ObjectId('6913ba1c70f5bc2f8957d042'),
    email: 'shubhamanand222@gmail.com',
    branchId: new ObjectId('6913ba1c70f5bc2f8957d046'),
    role: 'admin'
  },
  businessId: new ObjectId('6913ba1c70f5bc2f8957d046')
}
ğŸ” Getting business connection for ID: new ObjectId('6913ba1c70f5bc2f8957d046')
Total receipts: 0
ğŸ“‹ Found business code: BIZ0001 for ID: 6913ba1c70f5bc2f8957d046
ğŸ” Business connection obtained: true
ğŸ” Creating business models...
ğŸ” Business models created: [
  'Client',
  'Appointment',
  'Sale',
  'Receipt',
  'Product',
  'Service',
  'Staff',
  'CashRegistry',
  'Expense',
  'InventoryTransaction',
  'BusinessSettings',
  'Supplier',
  'Category'
]
âœ… Business database setup complete
ğŸ” Sales request for user: shubhamanand222@gmail.com branchId: new ObjectId('6913ba1c70f5bc2f8957d046')
Total revenue: 0
âœ… Dashboard stats calculated for business: new ObjectId('6913ba1c70f5bc2f8957d046')
127.0.0.1 - - [11/Nov/2025:22:36:30 +0000] "GET /api/reports/dashboard HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
âœ… Sales found: 0
127.0.0.1 - - [11/Nov/2025:22:36:30 +0000] "GET /api/sales HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming POST /api/admin/businesses
ğŸ”— Connecting to business database: salon_crm_BIZ0002 (legacy by code - backward compatible)
âœ… Connected to business database: salon_crm_BIZ0002
Error creating default business settings: TypeError: Cannot read properties of undefined (reading 'createBusinessModels')
    at /Users/shubhamanand/salon-crm/backend/routes/admin.js:393:43
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
127.0.0.1 - - [11/Nov/2025:22:44:39 +0000] "POST /api/admin/businesses HTTP/1.1" 201 1557 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:22:44:39 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 200 3202 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [11/Nov/2025:22:44:39 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
