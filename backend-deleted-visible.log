ğŸš€ Starting Ease My Salon Backend Server...
ğŸŒ Environment: development
ğŸ”— CORS Origins: [ 'http://localhost:3000', 'http://127.0.0.1:3000' ]
ğŸ—„ï¸ MongoDB URI: Not set
ğŸ”‘ JWT Secret: Not set
(node:84479) [MONGOOSE] Warning: Duplicate schema index on {"phone":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸš€ Ease My Salon Backend running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” API Base: http://localhost:3001/api
â° Inactivity checker scheduled to run daily at 2 AM IST
MongoDB Connected: localhost
ğŸ“¥ Incoming DELETE /api/admin/businesses/6913ba1c70f5bc2f8957d046
ğŸ”— Connecting to main database: ease_my_salon_main
âœ… Connected to main database: ease_my_salon_main
ğŸ—‘ï¸  Deleted business database: ease_my_salon_BIZ0001
âœ… Business database deleted: ease_my_salon_BIZ0001
127.0.0.1 - - [12/Nov/2025:07:05:41 +0000] "DELETE /api/admin/businesses/6913ba1c70f5bc2f8957d046 HTTP/1.1" 200 232 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:07:05:41 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 200 4772 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:07:05:45 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 200 281 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:07:05:45 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [12/Nov/2025:07:05:49 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  _id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
127.0.0.1 - - [12/Nov/2025:07:05:50 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:07:05:50 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:07:05:50 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:07:05:51 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:07:05:51 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses/69141ae82899e80b026a4927
127.0.0.1 - - [12/Nov/2025:08:18:14 +0000] "GET /api/admin/businesses/69141ae82899e80b026a4927 HTTP/1.1" 200 448 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses/69141ae82899e80b026a4927
127.0.0.1 - - [12/Nov/2025:08:18:14 +0000] "GET /api/admin/businesses/69141ae82899e80b026a4927 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/profile
127.0.0.1 - - [12/Nov/2025:08:18:21 +0000] "GET /api/admin/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/auth/profile
ğŸ” AuthenticateToken middleware called
ğŸ” JWT decoded successfully: {
  id: '69141b482899e80b026a49af',
  email: 'abc@gmail.com',
  role: 'admin',
  branchId: '69141b482899e80b026a49b3',
  iat: 1762925402,
  exp: 1763011802
}
ğŸ” Auth middleware user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Auth middleware req.user set: {
  id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
ğŸ” Profile endpoint - req.user: {
  id: new ObjectId('69141b482899e80b026a49af'),
  _id: new ObjectId('69141b482899e80b026a49af'),
  email: 'abc@gmail.com',
  branchId: new ObjectId('69141b482899e80b026a49b3'),
  role: 'admin'
}
127.0.0.1 - - [12/Nov/2025:08:18:21 +0000] "GET /api/auth/profile HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:08:18:21 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:08:18:21 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:08:18:28 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:08:18:28 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:08:18:31 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:08:18:31 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/settings
127.0.0.1 - - [12/Nov/2025:08:18:33 +0000] "GET /api/admin/settings HTTP/1.1" 200 11148 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/settings
127.0.0.1 - - [12/Nov/2025:08:18:33 +0000] "GET /api/admin/settings HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:08:18:39 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/dashboard/stats
127.0.0.1 - - [12/Nov/2025:08:18:39 +0000] "GET /api/admin/dashboard/stats HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:08:18:42 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
ğŸ“¥ Incoming GET /api/admin/businesses
127.0.0.1 - - [12/Nov/2025:08:18:42 +0000] "GET /api/admin/businesses?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
